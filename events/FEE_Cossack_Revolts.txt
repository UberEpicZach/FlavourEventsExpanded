namespace = fee_cossack_revolts

# First chain of events.
# Event 1-A.
country_event = {
	id = fee_cossack_revolts.1
	title = "fee_cossack_revolts_n_1a"
	desc = "fee_cossack_revolts_d_1a"
	picture = BARBARY_PIRATES_eventPicture
	fire_only_once = yes
	
	mean_time_to_happen = {
		months = 6
	}
	
	# Maybe I should add something here later.
	trigger = {
		tag = TUR
		exists = PLC
		is_year = 1580
		PLC = {
			has_estate = estate_cossacks
		}
	}
	
	# First option [1-A].
	option = {
		name = "fee_cossack_revolts_1_1a"
		ai_chance = { factor = 75 }
		
		PLC = {
			country_event = {
				id = fee_cossack_revolts.2
				tooltip = fee_cossack_revolts_1_1a_tooltip
			}
		}
	}
	
	# Second option [1-A].
	option = {
		name = "fee_cossack_revolts_2_1a"
		ai_chance = { factor = 25 }
		
		TUR = {
			add_stability = -1
			add_legitimacy = -20
		}
	}
}

# Event 1-B.
country_event = {
	id = fee_cossack_revolts.2
	title = "fee_cossack_revolts_n_1b"
	desc = "fee_cossack_revolts_d_1b"
	picture = DIPLOMACY_eventPicture
	is_triggered_only = yes
	
	# First option [1-B].
	option = {
		name = "fee_cossack_revolts_1_1b"
		ai_chance = { factor = 90 }
		
		PLC = {
			add_stability = -1
			add_estate_loyalty_modifier = {
				estate = estate_cossacks
				desc = fee_cossack_revolts_2_1b_modifier_name
				loyalty = -10
				duration = 3652
			}
		}
		
		TUR = {
			country_event = {
				id = fee_cossack_revolts.3
			}
		}
	}
	
	# Second option [1-B].
	option = {
		name = "fee_cossack_revolts_2_1b"
		ai_chance = { factor = 10 }
		
		TUR = {
			country_event = {
				id = fee_cossack_revolts.4
				tooltip = fee_cossack_revolts_2_1b_tooltip
			}
		}
	}
}

# Event 1-C.
country_event = {
	id = fee_cossack_revolts.3
	title = "fee_cossack_revolts_n_1c"
	desc = "fee_cossack_revolts_d_1c"
	picture = DIPLOMACY_eventPicture
	is_triggered_only = yes
	
	# First option [1-C].
	option = {
		name = "fee_cossack_revolts_1_1c"
		
		add_prestige = 15
	}
}	

# Event 1-D.
country_event = {
	id = fee_cossack_revolts.4
	title = "fee_cossack_revolts_n_1d"
	desc = "fee_cossack_revolts_d_1d"
	picture = BORDER_TENSION_eventPicture
	is_triggered_only = yes
	
	# First option [1-D].
	option = {
		name = "fee_cossack_revolts_1_1d"
		
		PLC = {
			declare_war_with_cb = {
				who = TUR
				casus_belli = cb_insult
			}
		}
	}
}

# Second chain of events. [Kosinski Uprising]
# Event 2-A.
country_event = {
	id = fee_cossack_revolts.5
	title = "fee_cossack_revolts_n_2a"
	desc = "fee_cossack_revolts_d_2a"
	picture = SIEGE_eventPicture
	fire_only_once = yes
	
	mean_time_to_happen = {
		months = 4
	}
	
	trigger = {
		tag = PLC
		is_year = 1591
		PLC = {
			has_estate = estate_cossacks
			owns_core_province = 4247
			owns_core_province = 1942
			owns_core_province = 280
			owns_core_province = 1944
			owns_core_province = 283
		}
	}
	
	# First option [2-A].
	option = {
		name = "fee_cossack_revolts_1_2a"
		
		PLC = {
			country_event = {
				id = fee_cossack_revolts.6
				days = 365
				random = 30
				tooltip = fee_cossack_revolts_1_2a_tooltip
			}
		}
		
		280 = {
			add_devastation = 5
		}
	}
}

# Event 3-A.
country_event = {
	id = fee_cossack_revolts.6
	title = "fee_cossack_revolts_n_3a"
	desc = "fee_cossack_revolts_d_3a"
	picture = ANGRY_MOB_eventPicture
	is_triggered_only = yes
	
	# First option [3-A].
	# Kill me pls this is so ugly.
	option = {
		name = "fee_cossack_revolts_1_3a"
		
		random_list = {
			75 = {
				PLC = {
					country_event = {
						id = fee_cossack_revolts.7
						days = 120
						random = 10
						tooltip = fee_cossack_revolts_1_3a_tooltip_1
					}
				}
			}
			25 = {
				PLC = {
					country_event = {
						id = fee_cossack_revolts.8
						days = 120
						random = 10
						tooltip = fee_cossack_revolts_1_3a_tooltip_2
					}
				}
			}
		}
	}
}

# Event 3-B-A
country_event = {
	id = fee_cossack_revolts.7
	title = "fee_cossack_revolts_n_3ba"
	desc = "fee_cossack_revolts_d_3ba"
	picture = CONQUEST_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "fee_cossack_revolts_1_3ba"
	}
}

# Event 3-B-B
country_event = {
	id = fee_cossack_revolts.8
	title = fee_cossack_revolts_n_3bb
	desc = fee_cossack_revolts_d_3bb
	picture = BATTLE_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "fee_cossack_revolts_1_3bb"
		
		add_prestige = -10
		
		280 = {
			spawn_rebels = {
				type = cossack_rebels
				size = 2
				win = yes
				unrest = 5
			}
		}
		
		2962 = {
			spawn_rebels = {
				type = cossack_rebels
				size = 1
				win = yes
				unrest = 5
			}
		}
		
		4540 = {
			spawn_rebels = {
				type = cossack_rebels
				size = 1
				win = yes
				unrest = 5
			}
		}
		
		1944 = {
			spawn_rebels = {
				type = cossack_rebels
				size = 1
				win = yes
				unrest = 5
			}
		}
		
		set_country_flag = PLC_kosinski_rebellion
		
		country_event = {
			id = fee_cossack_revolts.1000
			days = 320
			tooltip = fee_cossack_revolts_1_3bb_tooltip
		}
	}
}

# Event 3-B-B-B
country_event = {
	id = fee_cossack_revolts.9
	title = "fee_cossack_revolts_n_3bbb"
	desc = "fee_cossack_revolts_d_3bbb"
	picture = CONQUEST_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "fee_cossack_revolts_1_3bbb"
	}
}

# Third chain of events. [Nalyvaiko uprising]
# Event 4-A
country_event = {
	id = fee_cossack_revolts.10
	title = "fee_cossack_revolts_n_4a"
	desc = "fee_cossack_revolts_d_4a"
	picture = NOBLE_ESTATE_DEMANDS_eventPicture
	fire_only_once = yes
	
	mean_time_to_happen = {
		months = 7
	}
	
	trigger = {
		is_year = 1594
		tag = PLC
		PLC = {
			has_estate = estate_cossacks
			owns_core_province = 1943
			owns_core_province = 280
			owns_core_province = 4542
			owns_core_province = 292
			owns_core_province = 4539
			owns_core_province = 4247
			owns_core_province = 1942
			owns_core_province = 1944
			owns_core_province = 2407
			owns_core_province = 4540
			owns_core_province = 1943
			owns_core_province = 281
		}
	}
	
	option = {
		name = "fee_cossack_revolts_1_4a"
		
		trigger = {
			NOT = {
				OR = {
					ruler_has_personality = cruel_personality
					ruler_has_personality = malevolent_personality
				}
			}
		}
		
		random_list = {
			80 = {
				country_event = {
					id = fee_cossack_revolts.12
					days = 30
					tooltip = fee_cossack_revolts_1_4a_tooltip_1
				}
			}
			
			20 = {
				country_event = {
					id = fee_cossack_revolts.11
					days = 30
					tooltip = fee_cossack_revolts_1_4a_tooltip_2
				}
			}
		}
	}
	
	option = {
		name = "fee_cossack_revolts_2_4a"
		
		trigger = {
			ruler_has_personality = intricate_web_weaver_personality
		}
		
		country_event = {
			id = fee_cossack_revolts.11
		}
	}
	
	option = {
		name = "fee_cossack_revolts_3_4a"
		
		trigger = {
			NOT = {
				estate_influence = {
					estate = estate_nobles
					influence = 40
				}
			}
		}
		
		country_event = {
			id = fee_cossack_revolts.11
		}
	}
	
	option = {
		name = "fee_cossack_revolts_4_4a"
		
		trigger = {
			OR = {
				ruler_has_personality = cruel_personality
				ruler_has_personality = malevolent_personality
			}
		}
		
		country_event = {
			id = fee_cossack_revolts.12
		}
	}
}

# Event 4-B-B.
country_event = {
	id = fee_cossack_revolts.11
	title = "fee_cossack_revolts_n_4bb"
	desc = "fee_cossack_revolts_d_4bb"
	picture = DEBATE_REPUBLICAN_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "fee_cossack_revolts_1_4bb"
		
		add_estate_loyalty = {
			estate = estate_cossacks
			loyalty = 10
		}
	}
}

# Event 4-B-A
country_event = {
	id = fee_cossack_revolts.12
	title = "fee_cossack_revolts_n_4ba"
	desc = "fee_cossack_revolts_d_4ba"
	picture = ANGRY_MOB_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "fee_cossack_revolts_1_4ba"
		
		1943 = {
			spawn_rebels = {
				type = cossack_rebels
				size = 1
				win = yes
			}
		}
		
		280 = {
			spawn_rebels = {
				type = cossack_rebels
				size = 1
				win = yes
			}
		}
		
		279 = {
			spawn_rebels = {
				type = cossack_rebels
				size = 1
				win = yes
			}
		}
		
		country_event = {
			id = fee_cossack_revolts.1001
			days = 120
			tooltip = "fee_cossack_revolts_1_4ba_tooltip"
		}
	}
}

# Event 4-C.
country_event = {
	id = fee_cossack_revolts.13
	title = "fee_cossack_revolts_n_4c"
	desc = "fee_cossack_revolts_d_4c"
	picture = DIPLOMACY_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "fee_cossack_revolts_1_4c"
		
		country_event = {
			id = fee_cossack_revolts.15
		}
	}
	
	option = {
		name = "fee_cossack_revolts_2_4c"
		
		country_event = {
			id = fee_cossack_revolts.14
		}
		
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -20
		}
		
		add_estate_loyalty = {
			estate_church
			loyalty = -20
		}
	}
}

# Event 4-D-B.
country_event = {
	id = fee_cossack_revolts.14
	title = "fee_cossack_revolts_n_4db"
	desc = "fee_cossack_revolts_d_4db"
	picture = FAMINE_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "fee_cossack_revolts_1_4db"
		
		capital_scope = {
			spawn_rebels = {
				type = noble_rebels
				size = 2
			}
		}
		
		280 = {
			add_devastation = 10
		}
		
		4247 = {
			add_devastation = 10
		}
		
		1942 = {
			add_devastation = 10
		}
		
		1944 = {
			add_devastation = 10
		}
		
		2407 = {
			add_devastation = 10
		}
		
		4542 = {
			add_devastation = 10
		}
		
		4540 = {
			add_devastation = 10
		}
		
		1943 = {
			add_devastation = 10
		}
		
		292 = {
			add_devastation = 10
		}
	}
}

# Event 4-D-A.
country_event = {
	id = fee_cossack_revolts.15
	title = "fee_cossack_revolts_n_4da"
	desc = "fee_cossack_revolts_d_4da"
	picture = BATTLE_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "fee_cossack_revolts_1_4da"
		
		4542 = {
			change_controller = REB
		}
		
		# Stiopa's gonna love this.
		set_country_flag = PLC_nalyvaiko_rebellion_lubnie
		
		country_event = {
			id = fee_cossack_revolts.1002
			days = 90
			tooltip = "fee_cossack_revolts_1_4da_tooltip"
		}
	}
}

# Event 4-E.
country_event = {
	id = fee_cossack_revolts.16
	title = "fee_cossack_revolts_n_4e"
	desc = "fee_cossack_revolts_d_4e"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "fee_cossack_revolts_1_4e"
		
		add_estate_loyalty_modifier = {
			estate = estate_cossacks
			desc = "Confiscated lands"
			loyalty = -10
			duration = 3652
		}
		
		add_estate_influence_modifier = {
			estate = estate_cossacks
			desc = "Confiscated lands"
			influence = -20
			duration = 3652
		}
		
		add_stability = 1
		
		280 = {
			add_devastation = 10
		}
		
		4247 = {
			add_devastation = 10
		}
		
		1942 = {
			add_devastation = 10
		}
		
		1944 = {
			add_devastation = 10
		}
		
		2407 = {
			add_devastation = 10
		}
		
		4542 = {
			add_devastation = 10
		}
		
		4540 = {
			add_devastation = 10
		}
		
		1943 = {
			add_devastation = 10
		}
		
		292 = {
			add_devastation = 10
		}
	}
}

# Loop.
country_event = {
	id = fee_cossack_revolts.1000
	hidden = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				has_country_flag = PLC_kosinski_rebellion
				has_spawned_rebels = cossack_rebels
			}
			
			random_core_province = {
				spawn_rebels = {
					type = cossack_rebels
					size = 1
					win = no
					unrest = 5
				}
			}
			
			random_core_province = {
				spawn_rebels = {
					type = cossack_rebels
					size = 1
					win = no
					unrest = 5
				}
			}
			
			random_core_province = {
				spawn_rebels = {
					type = cossack_rebels
					size = 1
					win = no
					unrest = 5
				}
			}
			
			country_event = {
				id = fee_cossack_revolts.1000
				days = 182
			}
		}
		else_if {
			limit = {
				has_country_flag = PLC_kosinski_rebellion
				NOT = {
					has_spawned_rebels = cossack_rebels
				}
			}
			
			clr_country_flag = PLC_kosinski_rebellion
			
			country_event = {
				id = fee_cossack_revolts.9
			}
		}
	}
}

# Hidden event to spawn more rebels.
country_event = {
	id = fee_cossack_revolts.1001
	is_triggered_only = yes
	hidden = yes
	
	immediate = {
		292 = {
			spawn_rebels = {
				type = cossack_rebels
				size = 1
				win = yes
			}
		}
		
		4539 = {
			spawn_rebels = {
				type = cossack_rebels
				size = 1
				win = yes
			}
		}
		
		country_event = {
			id = fee_cossack_revolts.13
			days = 150
		}
	}
}

# Yet another loop.
country_event = {
	id = fee_cossack_revolts.1002
	is_triggered_only = yes
	hidden = yes
	
	immediate = {
		if = {
			limit = {
				AND = {
					has_country_flag = PLC_nalyvaiko_rebellion_lubnie
					
					4542 = {
						controlled_by = REB
					}
				}
			}
			
			country_event = {
				id = fee_cossack_revolts.1002
				days = 90
			}
		}
		else_if = {
			limit = {
				AND = {
					has_country_flag = PLC_nalyvaiko_rebellion_lubnie
					
					4542 = {
						controlled_by = PLC
					}
				}
			}
			
			clr_country_flag = PLC_nalyvaiko_rebellion_lubnie
			
			country_event = {
				id = fee_cossack_revolts.16
			}
		}
	}
}

# Additional events for ME.
# Event 1
country_event = {
	id = fee_cossack_revolts.5001
	title = "fee_cossack_revolts_n_me_1"
	desc = "fee_cossack_revolts_d_me_1"
	picture = MILITARY_CAMP_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "fee_cossack_revolts_1_me_1"
		
		country_event = {
			id = fee_cossack_revolts.5002
		}
	}
	
	option = {
		name = "fee_cossack_revolts_2_me_1"
	}
}

# Event 2
country_event = {
	id = fee_cossack_revolts.5002
	title = "fee_cossack_revolts_n_me_2"
	desc = "fee_cossack_revolts_d_me_2"
	picture = MILITARY_CAMP_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "fee_cossack_revolts_1_me_2"
		
		country_event = {
			id = fee_cossack_revolts.5003
		}
		
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
		
		4542 = {
			change_controller = PLC
		}
	}
	
	option = {
		name = "fee_cossack_revolts_2_me_2"
		
		country_event = {
			id = fee_cossack_revolts.5004
		}
		
		add_prestige = -10
		
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 10
		}
	}
}

# Event 3
country_event = {
	id = fee_cossack_revolts.5003
	title = "fee_cossack_revolts_n_me_3"
	desc = "fee_cossack_revolts_d_me_3"
	picture = LIBERUM_VETO_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "fee_cossack_revolts_1_me_3"
		
		add_stability = 1
		
		280 = {
			add_devastation = 10
		}
		
		4247 = {
			add_devastation = 10
		}
		
		1942 = {
			add_devastation = 10
		}
		
		1944 = {
			add_devastation = 10
		}
		
		2407 = {
			add_devastation = 10
		}
		
		4542 = {
			add_devastation = 10
		}
		
		4540 = {
			add_devastation = 10
		}
		
		1943 = {
			add_devastation = 10
		}
		
		292 = {
			add_devastation = 10
		}
	}
	
	option = {
		name = "fee_cossack_revolts_2_me_3"
		
		trigger = {
			OR = {
				ruler_has_personality = calm_personality
				ruler_has_personality = kind_hearted_personality
			}
		}
		
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
		
		define_general = {
			shock = 5
			fire = 2
			manuever = 3
			siege = 1
			name = "Severyn Nalyvaiko"
		}
		
		add_stability = 1
		
		280 = {
			add_devastation = 10
		}
		
		4247 = {
			add_devastation = 10
		}
		
		1942 = {
			add_devastation = 10
		}
		
		1944 = {
			add_devastation = 10
		}
		
		2407 = {
			add_devastation = 10
		}
		
		4542 = {
			add_devastation = 10
		}
		
		4540 = {
			add_devastation = 10
		}
		
		1943 = {
			add_devastation = 10
		}
		
		292 = {
			add_devastation = 10
		}
	}
}

# Event 4
country_event = {
	id = fee_cossack_revolts.5004
	title = "fee_cossack_revolts_n_me_4"
	desc = "fee_cossack_revolts_d_me_4"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "fee_cossack_revolts_1_me_4"
		
		4542 = {
			change_controller = PLC
		}
		
		add_estate_loyalty_modifier = {
			estate = estate_cossacks
			desc = "Confiscated lands"
			loyalty = -10
			duration = 3652
		}
		
		add_estate_influence_modifier = {
			estate = estate_cossacks
			desc = "Confiscated lands"
			influence = -20
			duration = 3652
		}
		
		add_stability = 1
		
		280 = {
			add_devastation = 10
		}
		
		4247 = {
			add_devastation = 10
		}
		
		1942 = {
			add_devastation = 10
		}
		
		1944 = {
			add_devastation = 10
		}
		
		2407 = {
			add_devastation = 10
		}
		
		4542 = {
			add_devastation = 10
		}
		
		4540 = {
			add_devastation = 10
		}
		
		1943 = {
			add_devastation = 10
		}
		
		292 = {
			add_devastation = 10
		}
	}
}