namespace = FEE_Mughals_Events

#############
### Babur ###
#############

# Young Timurid prince without a kingdom
country_event = {
	id = FEE_Mughals_Events.1
	title = FEE_Mughals_Events.1.T
	desc = FEE_Mughals_Events.1.D
	picture = FORT_eventPicture

	fire_only_once = yes

	trigger = {
		tag = AFG
		religion_group = muslim
		is_year = 1500
		NOT = { is_year = 1530 }
		owns = 451
	}

	mean_time_to_happen = {
		months = 24
	}

	option = {
		name = FEE_Mughals_Events.1.OPT1
		ai_chance = {
			factor = 80
		}

		kill_heir = { allow_new_heir = no }
		kill_ruler = yes
		define_ruler = {
			name = "Babur"
			dynasty = "Timurid"
			culture = uzbehk
			age = 20
			adm = 5
			dip = 6
			mil = 6
			attach_leader = "Babur"
		}
		add_ruler_personality = patron_of_arts_personality
		add_ruler_personality = conqueror_personality
		convert_ruler_to_general = yes

		define_ruler_to_general = {
			fire = 6
			shock = 5
			manuever = 4
			siege = 5
			trait = cannoneer_personality
		}
		hidden_effect = {
			set_country_flag = fee_babur
		}
	}

	option = {
		name = FEE_Mughals_Events.1.OPT2
		ai_chance = {
			factor = 10
		}

		goto = 451

		451 = {
			spawn_rebels = {
				size = 2
				type = pretender_rebels
				leader = "Babur"
				leader_dynasty = "Timurid"
				culture = uzbehk
				religion = sunni
			}
		}
	}

	option = {
		name = FEE_Mughals_Events.1.OPT3
		trigger = {
			dynasty = "Timurid"
		}
		ai_chance = {
			factor = 10
		}

		define_general = {
			fire = 6
			shock = 5
			manuever = 4
			siege = 5
			trait = cannoneer_personality
		}
	}
}

# Gardens of Babur
country_event = {
	id = FEE_Mughals_Events.2
	title = FEE_Mughals_Events.2.T
	desc = FEE_Mughals_Events.2.D
	picture = GREAT_BUILDING_eventPicture

	fire_only_once = yes

	trigger = {
		tag = AFG
		has_country_flag = fee_babur
		owns = 451
	}

	mean_time_to_happen = {
		months = 12
	}

	goto = 451

	option = {
		name = FEE_Mughals_Events.2.OPT1
		ai_chance = {
			factor = 80
		}

		add_years_of_income = -2
		451	= {
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
			add_prosperity = 50
			if = {
				limit = {
					is_expanded_mod_active = { mod = great_monuments }
					NOT = {
						has_great_project = {
							type = gme_gardens_babur
							tier = 3
						}
					}
				}
				add_great_project_tier = {
					type = gme_gardens_babur
					tier = 1
				}
			}
			else = {
				add_permanent_province_modifier = {
					name = fee_mug_bagh_babur
					duration = -1
				}
			}
		}
	}

	option = {
		name = FEE_Mughals_Events.2.OPT2
		ai_chance = {
			factor = 20
		}

		add_prestige = -5
	}
}

# Ottoman generals
country_event = {
	id = FEE_Mughals_Events.3
	title = FEE_Mughals_Events.3.T
	desc = FEE_Mughals_Events.3.D
	picture = CONQUEST_eventPicture

	trigger = {
		tag = AFG
		has_country_flag = fee_babur
		has_opinion = {
			who = TUR
			value = 50
		}
	}

	mean_time_to_happen = {
		months = 120
	}

	option = {
		name = FEE_Mughals_Events.3.OPT1

		define_general = {
			fire = 6
			shock = 3
			manuever = 4
			siege = 2
			name = "Mustafa Rumi"
			trait = master_of_arms_personality
		}
		if = {
			limit = {
				is_expanded_mod_active = { mod = advisor_types }
			}
			define_advisor = {
				type = ate_advisor_master_of_artillery
				name = "Ustad Ali Quli"
				skill = 3
				cost_multiplier = 0.66
				religion = sunni
				culture = turkish
			}
		}
		else = {
			define_advisor = {
				type = commandant
				name = "Ustad Ali Quli"
				skill = 3
				cost_multiplier = 0.66
				religion = sunni
				culture = turkish
			}
		}
	}
}