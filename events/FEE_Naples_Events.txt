namespace = FEE_Naples_Events

#The Court of Alfonso il Magnanimo
country_event = {
	id = FEE_Naples_Events.1
	title = FEE_Naples_Events.1.T
	desc = FEE_Naples_Events.1.D
	picture = ADVISOR_eventPicture

	fire_only_once = yes

	trigger = {
		is_year = 1412
		NOT = { is_year = 1458 }
		fee_is_was_nap_sic = yes
		has_ruler = "Alfons V"
	}

	mean_time_to_happen = {
		months = 24
	}

	immediate = {
		add_ruler_modifier = {
			name = fee_nap_magnanimo
			duration = -1
		}
	}

	option = {
		name = FEE_Naples_Events.1.OPT1
		ai_chance = {
			factor = 33
		}

		define_advisor = {
			type = philosopher
			name = "Lorenzo Valla"
			skill = 2
			culture = umbrian
			religion = catholic
			cost_multiplier = 0.33
		}
	}

	option = {
		name = FEE_Naples_Events.1.OPT2
		ai_chance = {
			factor = 33
		}

		define_advisor = {
			type = master_of_mint
			name = "Antonio Beccadelli"
			skill = 2
			culture = sicilian
			religion = catholic
			cost_multiplier = 0.33
		}
		custom_tooltip = NAP_ACCADEMY_BECCADELLI_TT
		set_country_flag = nap_antonio_beccadelli
	}

	option = {
		name = FEE_Naples_Events.1.OPT3
		ai_chance = {
			factor = 33
		}

		define_advisor = {
			type = diplomat
			name = "Manuele Crisolora"
			skill = 2
			culture = greek
			religion = catholic
			cost_multiplier = 0.33
		}

		add_opinion = {
			who = BYZ
			modifier = fee_nap_recoinciliation
		}
		reverse_add_opinion = {
			who = BYZ
			modifier = fee_nap_recoinciliation
		}
		add_opinion = {
			who = PAP
			modifier = fee_nap_recoinciliation
		}
		reverse_add_opinion = {
			who = PAP
			modifier = fee_nap_recoinciliation
		}
	}
}

#Regia dogana della mena delle pecore di Puglia
country_event = {
	id = FEE_Naples_Events.2
	title = FEE_Naples_Events.2.T
	desc = FEE_Naples_Events.2.D
	picture = FARMING_eventPicture

	fire_only_once = yes

	trigger = {
		is_year = 1447
		fee_is_was_nap_sic = yes
		development_in_provinces = {
			value = 75
			OR = {
				area = naples_area
				area = sicily_area
				area = western_sicily_area
				area = apulia_area
				area = central_italy_area
				area = calabria_area
			}
		}
		any_owned_province = {
			OR = {
				area = central_italy_area
				area = apulia_area
				area = calabria_area
			}
			OR = {
				num_of_times_improved = 3
				base_production = 7
			}
		}
	}

	option = {
		name = FEE_Naples_Events.2.OPT1

		add_years_of_owned_provinces_production_income = {
			years = 10
			trigger = {
				OR = {
					area = naples_area
					area = sicily_area
					area = western_sicily_area
					area = apulia_area
					area = central_italy_area
					area = calabria_area
				}
			}
		}
		apulia_area = {
			limit = { country_or_non_sovereign_subject_holds = ROOT }
			add_base_production = 1
			add_permanent_province_modifier = {
				name = fee_nap_transumanza
				duration = -1
			}
		}
		central_italy_area = {
			limit = { country_or_non_sovereign_subject_holds = ROOT }
			add_base_production = 1
			add_permanent_province_modifier = {
				name = fee_nap_transumanza
				duration = -1
			}
		}
	}
}

#Gjergj Kastrioti SkÃ«nderbeu
country_event = {
	id = FEE_Naples_Events.3
	title = FEE_Naples_Events.3.T
	desc = FEE_Naples_Events.3.D
	picture = DIPLOMACY_eventPicture

	fire_only_once = yes

	trigger = {
		is_year = 1451
		exists = ALB
		OR = {
			AND = {
				fee_is_was_nap_sic = yes
				is_free_or_tributary_trigger = yes
			}
			AND = {
				tag = ARA
				OR = {
					overlord_of = NAP
					overlord_of = SIC
					overlord_of = TTS
				}
			}
		}
	}

	option = {
		name = FEE_Naples_Events.3.OPT1
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				is_at_war = no
			}
		}

		create_guarantee = ALB
		ALB = {
			country_event = {
				id = FEE_Naples_Events.4
				days = 30
			}
		}
		add_opinion = {
			who = TUR
			modifier = fee_nap_helps_skanderberg
		}
		custom_tooltip = ALB_HELP_TT
		hidden_effect = {
			country_event = {
				id = FEE_Naples_Events.12
			}
		}
	}

	option = {
		name = FEE_Naples_Events.3.OPT2
		ai_chance = {
			factor = 50
		}

		add_stability_or_adm_power = yes
		ALB = {
			add_yearly_manpower = 2
			add_years_of_income = 3
		}
	}
}

#Aragorn Helps Skanderberg
country_event = {
	id = FEE_Naples_Events.4
	title = FEE_Naples_Events.4.T
	desc = FEE_Naples_Events.4.D
	picture = DIPLOMACY_eventPicture

	is_triggered_only = yes

	option = {
		name = FEE_Naples_Events.4.OPT1

		add_yearly_manpower = 2
		add_years_of_income = 3
		if = {
			limit = {
				NOT = { war_exhaustion = 1 }
			}
			add_war_exhaustion = -2.5
		}
		FROM = {
			create_subject = {
				subject_type = march
				subject = ROOT
			}
		}
	}

	option = {
		name = FEE_Naples_Events.4.OPT2
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				is_at_war = yes
			}
		}

		add_yearly_manpower = 2
		add_years_of_income = 3
		if = {
			limit = {
				war_exhaustion = 1
			}
			add_war_exhaustion = -2.5
		}
	}
}

#Accademia Pontaniana
country_event = {
	id = FEE_Naples_Events.5
	title = FEE_Naples_Events.5.T
	desc = FEE_Naples_Events.5.D
	picture = UNIVERSITY_eventPicture

	fire_only_once = yes

	trigger = {
		is_year = 1458
		fee_is_was_nap_sic = yes
		owns = 121
		121 = { num_of_times_improved = 2 }
		OR = {
			theologian = 2
			diplomat = 2
			statesman = 2
			philosopher = 2
			artist = 2
			master_of_mint = 2
		}
	}

	mean_time_to_happen = {
		months = 12
		modifier = {
			factor = 0.5
			OR = {
				master_of_mint = 2
				has_country_flag = nap_antonio_beccadelli
			}
		}
	}

	option = {
		name = FEE_Naples_Events.5.OPT1
		add_adm_power = 25
		add_innovativeness_small_effect = yes
		121 = {
			add_institution_embracement = {
				which = renaissance
				value = 24
			}
		}
	}
}

#Porta Capuana
country_event = {
	id = FEE_Naples_Events.6
	title = FEE_Naples_Events.6.T
	desc = FEE_Naples_Events.6.D
	picture = FORTIFIED_CITY_WITH_CARAVAN_OUTSIDE_eventPicture

	fire_only_once = yes

	trigger = {
		is_year = 1484
		owns = 121
		121 = {
			base_manpower = 10
		}
	}

	mean_time_to_happen = {
		months = 12
		modifier = {
			factor = 0.5
			OR = {
				fortification_expert = 2
				has_country_flag = nap_antonio_beccadelli
			}
		}
	}

	option = {
		name = FEE_Naples_Events.6.OPT1

		121 = {
			add_permanent_province_modifier = {
				name = fee_nap_porta_capuana
				duration = -1
			}
		}
	}
}

#Isabella di Chiaromonte
country_event = {
	id = FEE_Naples_Events.7
	title = FEE_Naples_Events.7.T
	desc = FEE_Naples_Events.7.D
	picture = QUEEN_AT_COUNCIL_TABLE_eventPicture

	fire_only_once = yes

	trigger = {
		is_year = 1440
		fee_is_was_nap_sic = yes
		NOT = { has_ruler = "Alfons V" }
		has_ruler = yes
		NOT = { is_year = 1465 }
	}

	mean_time_to_happen = {
		months = 12
	}

	option = {
		name = FEE_Naples_Events.7.OPT1
		ai_chance = {
			factor = 50
		}
		trigger = {
			hidden_trigger = {
				has_consort = yes
			}
		}

		add_stability_or_adm_power = yes
	}

	option = {
		name = FEE_Naples_Events.7.OPT2
		ai_chance = {
			factor = 50
		}

		if = {
			limit = { has_consort = yes }
			remove_consort = yes
		}
		define_consort = {
			name = "Isabella Chiaromonte"
			culture = neapolitan
			religion = catholic
			age = 20
			adm = 3
			dip = 4
			mil = 2
		}
		apulia_area = {
			add_unrest = -3
		}
	}
}

# Manifattura Napoletana
country_event = {
	id = FEE_Naples_Events.8
	title = FEE_Naples_Events.8.T
	desc = FEE_Naples_Events.8.D
	picture = TRADE_GOODS_eventPicture

	fire_only_once = yes

	trigger = {
		owns = 121
		is_year = 1445
		NOT = { is_year = 1477 }
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = FEE_Naples_Events.8.OPT1
		trigger = {
			NOT = {
				121 = { trade_goods = cloth }
			}
		}

		add_years_of_income = -0.5
		121 = { change_trade_goods = cloth }
		2984 = {
			add_base_production = 1
			add_permanent_province_modifier = {
				name = fee_nap_catanzaro_seta
				duration = -1
			}
		}
	}

	option = {
		name = FEE_Naples_Events.8.OPT2
		trigger = {
			NOT = {
				121 = { trade_goods = silk }
			}
		}

		add_years_of_income = -1
		121 = { change_trade_goods = silk }
		2984 = {
			add_base_production = 1
			add_permanent_province_modifier = {
				name = fee_nap_catanzaro_seta
				duration = -1
			}
		}
	}

	option = {
		name = FEE_Naples_Events.8.OPT3

		add_mercantilism = 1
		121 = { add_base_production = 1 }
	}
}

# Artefici Forestieri
country_event = {
	id = FEE_Naples_Events.9
	title = FEE_Naples_Events.9.T
	desc = FEE_Naples_Events.9.D
	picture = TRADE_GOODS_eventPicture

	fire_only_once = yes

	trigger = {
		121 = {
			owned_by = ROOT
			OR = {
				trade_goods = cloth
				trade_goods = silk
			}
		}
		is_year = 1458
		NOT = { is_year = 1459 }
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = FEE_Naples_Events.9.OPT1

		121 = {
			add_permanent_province_modifier = {
				name = fee_nap_silk_foreign_craftsman
				duration = -1
			}
			add_trade_modifier = {
				who = ROOT
				duration = 3650
				power = 10
				key = fee_nap_silk_foreign_craftsman
			}
		}
	}
}

# Consolato dell'Arte della Seta
country_event = {
	id = FEE_Naples_Events.10
	title = FEE_Naples_Events.10.T
	desc = FEE_Naples_Events.10.D
	picture = TRADE_GOODS_eventPicture

	fire_only_once = yes

	trigger = {
		121 = {
			owned_by = ROOT
			OR = {
				trade_goods = cloth
				trade_goods = silk
			}
		}
		is_year = 1465
		NOT = { is_year = 1477 }
	}

	mean_time_to_happen = {
		years = 1
	}

	option = {
		name = FEE_Naples_Events.10.OPT1

		add_years_of_owned_provinces_production_income = {
			years = 10
			trigger = {
				province_id = 121
			}
		}
		add_mercantilism = 3
		121 = {
			add_base_production = 2
			remove_province_modifier = fee_nap_silk_foreign_craftsman
			add_permanent_province_modifier = {
				name = fee_nap_silk_consolato_seta
				duration = -1
			}
		}
	}
}

# Seta per il Nuovo Mondo
country_event = {
	id = FEE_Naples_Events.11
	title = FEE_Naples_Events.11.T
	desc = FEE_Naples_Events.11.D
	picture = TRADE_GOODS_eventPicture

	fire_only_once = yes

	trigger = {
		121 = {
			owned_by = ROOT
			OR = {
				trade_goods = cloth
				trade_goods = silk
			}
			new_world_i = 100
		}
		is_year = 1477
		NOT = { is_year = 1600 }
	}

	mean_time_to_happen = {
		years = 1
	}

	option = {
		name = FEE_Naples_Events.11.OPT1

		add_dip_power = 25
		121 = {
			add_base_tax = 2
			remove_province_modifier = fee_nap_silk_foreign_craftsman
			remove_province_modifier = fee_nap_silk_consolato_seta
			add_permanent_province_modifier = {
				name = fee_nap_silk_new_world
				duration = -1
			}
		}
		1293 = {
			add_trade_node_income = 10
			add_trade_modifier = {
				who = ROOT
				duration = 7300
				power = 10
				key = trade_boost
			}
		}
		1295 = {
			add_trade_node_income = 10
			add_trade_modifier = {
				who = ROOT
				duration = 7300
				power = 10
				key = trade_boost
			}
		}
		1298 = {
			add_trade_node_income = 10
			add_trade_modifier = {
				who = ROOT
				duration = 7300
				power = 10
				key = trade_boost
			}
		}
	}
}

# Nero di Napoli
country_event = {
	id = FEE_Naples_Events.12
	title = FEE_Naples_Events.12.T
	desc = FEE_Naples_Events.12.D
	picture = TRADE_GOODS_eventPicture

	fire_only_once = yes

	trigger = {
		121 = {
			base_production = 20
			owned_by = ROOT
			OR = {
				trade_goods = cloth
				trade_goods = silk
			}
			has_province_modifier = fee_nap_silk_new_world
		}
		is_year = 1500
		NOT = { is_year = 1600 }
	}

	mean_time_to_happen = {
		years = 1
	}

	option = {
		name = FEE_Naples_Events.12.OPT1

		add_mercantilism = 6
		if = {
			limit = {
				121 = {
					trade_goods = silk
				}
			}
			change_price = {
				trade_goods = silk
				key = fee_nap_neapolitan_black
				value = 0.33
				duration = 36500
			}
		}
		else = {
			change_price = {
				trade_goods = cloth
				key = fee_nap_neapolitan_black
				value = 0.25
				duration = 36500
			}
		}
		121 = {
			remove_province_modifier = fee_nap_silk_foreign_craftsman
			remove_province_modifier = fee_nap_silk_consolato_seta
			remove_province_modifier = fee_nap_silk_new_world
			add_province_modifier = {
				name = fee_nap_neapolitan_black
				duration = -1
			}
		}
	}
}

# Nero di Napoli
country_event = {
	id = FEE_Naples_Events.12
	title = FEE_Naples_Events.12.T
	desc = FEE_Naples_Events.12.D
	picture = TRADE_GOODS_eventPicture

	fire_only_once = yes

	trigger = {
		121 = {
			base_production = 20
			owned_by = ROOT
			OR = {
				trade_goods = cloth
				trade_goods = silk
			}
			has_province_modifier = fee_nap_silk_new_world
		}
		is_year = 1500
		NOT = { is_year = 1600 }
	}

	mean_time_to_happen = {
		years = 1
	}

	option = {
		name = FEE_Naples_Events.12.OPT1

		add_mercantilism = 6
		if = {
			limit = {
				121 = {
					trade_goods = silk
				}
			}
			change_price = {
				trade_goods = silk
				key = fee_nap_neapolitan_black
				value = 0.33
				duration = 36500
			}
		}
		else = {
			change_price = {
				trade_goods = cloth
				key = fee_nap_neapolitan_black
				value = 0.25
				duration = 36500
			}
		}
		121 = {
			remove_province_modifier = fee_nap_silk_foreign_craftsman
			remove_province_modifier = fee_nap_silk_consolato_seta
			remove_province_modifier = fee_nap_silk_new_world
			add_province_modifier = {
				name = fee_nap_neapolitan_black
				duration = -1
			}
		}
	}
}

#Dream of Ladislao I
country_event = {
	id = FEE_Naples_Events.93
	title = FEE_Naples_Events.93.T
	desc = FEE_Naples_Events.93.D
	picture = GOOD_WITH_MONARCH_eventPicture

	fire_only_once = yes

	trigger = {
		is_year = 1377
		fee_is_was_nap_sic = yes
		is_free_or_tributary_trigger = yes
	}

	mean_time_to_happen = {
		days = 60
	}

	option = {
		name = FEE_Naples_Events.93.OPT1
		ai_chance = {
			factor = 50
		}

		tuscany_area = {
			limit = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
				NOT = { is_empty = yes }
				NOT = { is_wasteland = yes }
			}
			add_permanent_claim = ROOT
		}
		lazio_area = {
			limit = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
				NOT = { is_empty = yes }
				NOT = { is_wasteland = yes }
			}
			add_permanent_claim = ROOT
		}
	}

	option = {
		name = FEE_Naples_Events.93.OPT2
		ai_chance = {
			factor = 50
		}

		add_adm_power = 100
		add_dip_power = 100
		add_mil_power = 100
		add_stability = 1
	}
}

#Legacy of Ladislao I
country_event = {
	id = FEE_Naples_Events.94
	title = FEE_Naples_Events.94.T
	desc = FEE_Naples_Events.94.D
	picture = GOOD_WITH_MONARCH_eventPicture

	fire_only_once = yes

	trigger = {
		is_year = 1492
		fee_is_was_nap_sic = yes
		is_free_or_tributary_trigger = yes
		NOT = { has_country_flag = formed_italy_flag }
		adm_tech = 7
		tuscany_area = {
			type = all
			owned_by = ROOT
		}
		lazio_area = {
			type = all
			owned_by = ROOT
		}
		naples_area = {
			type = all
			owned_by = ROOT
		}
	}

	mean_time_to_happen = {
		days = 60
	}

	option = {
		name = FEE_Naples_Events.94.OPT1
		ai_chance = {
			factor = 90
		}

		hidden_effect = {
			set_country_flag = TTS_without_tts
			if = {
				limit = {
					is_part_of_hre = yes
					is_elector = no
					is_emperor = no
				}
				emperor = {
					add_opinion = {
						who = root
						modifier = opinion_left_empire
					}
				}
				set_in_empire = no
				emperor = {
					country_event = { id = hre_event.5 }
				}
			}
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_in_empire = no
				set_government_rank = 2
			}
			set_country_flag = formed_italy_flag
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			swap_non_generic_missions = yes
		}
		change_tag = ITA
		swap_non_generic_missions = yes
	}

	option = {
		name = FEE_Naples_Events.94.OPT2
		ai_chance = {
			factor = 10
		}

		add_adm_power = 100
		add_dip_power = 100
		add_mil_power = 100
		add_stability = 1
	}
}

# Pedro Alvarez de Toledo
country_event = {
	id = FEE_Naples_Events.95
	title = FEE_Naples_Events.95.T
	desc = FEE_Naples_Events.95.D
	picture = ADVISOR_eventPicture

	fire_only_once = yes

	trigger = {
		fee_is_was_nap_sic = yes
		is_year = 1520
		NOT = { is_year = 1560 }
	}

	mean_time_to_happen = {
		months = 300
		modifier = {
			factor = 0.8
			adm = 4
		}
		modifier = {
			factor = 0.8
			is_subject = yes
		}
	}

	#We need to centralise our state.
	option = {
		name = FEE_Naples_Events.95.OPT1

		add_adm_power = -50
		add_dip_power = -50
		capital_scope = {
			add_province_modifier = {
				name = fee_nap_pedro_alvarez
				duration = 7300
			}
		}
	}

	#Naples must become a military power to rival any in Europe.
	option = {
		name = FEE_Naples_Events.95.OPT2

		add_mil_power = 75
	}
}

# The Construction Projects of Pedro Alvarez de Toledo
country_event = {
	id = FEE_Naples_Events.96
	title = FEE_Naples_Events.96.T
	desc = FEE_Naples_Events.96.D
	picture = GREAT_BUILDING_eventPicture

	fire_only_once = yes

	trigger = {
		fee_is_was_nap_sic = yes
		is_year = 1530
		NOT = { is_year = 1570 }
		owns = 121
	}

	mean_time_to_happen = {
		months = 360
		modifier = {
			factor = 0.6
			has_country_modifier = fee_nap_pedro_alvarez
		}
		modifier = {
			factor = 0.8
			has_idea_group = economic_ideas
		}
		modifier = {
			factor = 0.8
			overlord = { has_idea_group = influence_ideas }
		}
	}

	option = {
		name = FEE_Naples_Events.96.OPT1

		121 = {
			add_base_tax = 1
			add_base_production = 1
			add_province_modifier = {
				name = fee_nap_de_toledo_naples
				duration = 3650
			}
		}
	}

	option = {
		name = FEE_Naples_Events.96.OPT2

		121 = {
			add_base_tax = 1
			add_base_manpower = 1
			add_province_modifier = {
				name = fee_nap_de_toledo_naples
				duration = 3650
			}
		}
	}
}

# The Flood of Bones
country_event = {
	id = FEE_Naples_Events.97
	title = FEE_Naples_Events.97.T
	desc = FEE_Naples_Events.97.D
	picture = BIG_BOOK_eventPicture

	fire_only_once = yes

	trigger = {
		owns = 121
		is_year = 1750
	}

	mean_time_to_happen = {
		months = 540
	}

	option = {
		name = FEE_Naples_Events.97.OPT1

		121 = { add_base_tax = 1 }
	}
}

# San Gennaro dei Poveri
country_event = {
	id = FEE_Naples_Events.98
	title = FEE_Naples_Events.98.T
	desc = FEE_Naples_Events.98.D
	picture = GREAT_BUILDING_eventPicture

	fire_only_once = yes

	trigger = {
		owns = 121
		is_year = 1650
		NOT = { is_year = 1700 }
		is_at_war = no
	}

	mean_time_to_happen = {
		months = 420
		modifier = {
			factor = 0.8
			has_idea_group = religious_ideas
		}
		modifier = {
			factor = 0.8
			has_idea_group = humanist_ideas
		}
	}

	#We need this, for the good of the pour
	option = {
		name = FEE_Naples_Events.98.OPT1

		121 = {
			add_province_modifier = {
				name = fee_nap_gennaro_poveri
				duration = -1
			}
		}
	}

	#Our resources are better spent elsewhere
	option = {
		name = FEE_Naples_Events.98.OPT2

		add_adm_power = 25
	}
}

# Ospedale L'Albergo Reale dei Poveri
country_event = {
	id = FEE_Naples_Events.99
	title = FEE_Naples_Events.99.T
	desc = FEE_Naples_Events.99.D
	picture = GREAT_BUILDING_eventPicture

	fire_only_once = yes

	trigger = {
		is_year = 1750
		owns = 121
	}

	mean_time_to_happen = {
		months = 240
	}

	#Let us show the world we care!
	option = {
		name = FEE_Naples_Events.99.OPT1

		add_years_of_income = -0.08
		add_country_modifier = {
			name = fee_nap_albergo_reale
			duration = -1
		}
	}

	#Who can afford to spend money on the poor?
	option = {
		name = FEE_Naples_Events.99.OPT2

		add_prestige = -5
	}
}

# Francesco Solimena
country_event = {
	id = FEE_Naples_Events.100
	title = FEE_Naples_Events.100.T
	desc = FEE_Naples_Events.100.D
	picture = IMPORTANT_STATUE_eventPicture

	fire_only_once = yes

	trigger = {
		is_year = 1670
		NOT = { is_year = 1750 }
	}

	mean_time_to_happen = {
		months = 480
	}

	#Let him show what baroque art truly means!
	option = {
		name = FEE_Naples_Events.100.OPT1

		add_prestige_or_monarch_power = { amount = 10 }
		add_stability_or_adm_power = yes
		add_treasury = 50
	}
}

#
#country_event = {
#	id = FEE_Naples_Events.
#	title = FEE_Naples_Events..T
#	desc = FEE_Naples_Events..D
#	picture = FARMING_eventPicture
#
#	fire_only_once = yes
#	trigger = {
#		tag = NAP
#	}
#
#	mean_time_to_happen = {
#		days = 60
#	}
#
#	option = {
#		name = FEE_Naples_Events..OPT1
#
#	}
#}