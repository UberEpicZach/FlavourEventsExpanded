namespace = CE_hungary_expanded
	#Jay DoubleU


#Austria #Bohemian Raids
country_event = {
	id = CE_hungary_expanded.1
	title = CE_hungary_expanded.1.t
	desc = CE_hungary_expanded.1.d
	picture = CITY_VIEW_eventPicture

	fire_only_once = yes

	trigger = {
		tag = HAB
        BOH = {
			is_subject = no
            has_country_flag = first_hussite_king
		}
	}

	mean_time_to_happen = {
        months = 120
	}

	immediate = {
		every_owned_province = {
			limit = {
				any_neighbor_province = {
					owner = {
						tag = BOH
					}
				}
			}
			add_devastation = 15
		}
	}

	option = {
		name = CE_hungary_expanded.1.a
		every_owned_province = {
			limit = {
				any_neighbor_province = {
					owner = {
						tag = BOH
					}
				}
			}
			add_base_tax = -1
			add_base_production = -1
			add_base_manpower = -1
		}
		add_stability = -1
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					is_at_war = yes
				}
			}
		}
	}
	option = {
		name = CE_hungary_expanded.1.b
		custom_tooltip = CE_austria_demands_reparations
		
		tooltip = {
			HAB = {
				add_casus_belli = {
					target = BOH
					type = cb_border_war
					months = 12
				}
			}
		}
		BOH = {
			country_event = {
				id = CE_hungary_expanded.2
				days = 30
			}
		}
		custom_tooltip = CE_austria_calls_for_aid
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_at_war = yes
			}
		}
	}
}

#Bohemia #Austrian Reparations
country_event = {
	id = CE_hungary_expanded.2
	title = CE_hungary_expanded.2.t
	desc = CE_hungary_expanded.2.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	option = {
		name = CE_hungary_expanded.2.a
		add_treasury = -250
		tooltip = {
			HAB = {
				add_treasury = 250
			}
		}
		HAB = {
			country_event = {
				id = CE_hungary_expanded.3
				days = 30
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_at_war = no
			}
		}
	}
	option = {
		name = CE_hungary_expanded.2.b
		HAB = {
			declare_war = BOH
			set_country_flag = CE_promised_hungary_bag_of_gold
		}
		HUN = {
			country_event = {
				id = CE_hungary_expanded.4
				days = 30
			}
		}
		custom_tooltip = CE_HUN_catholic_sympathizers
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_at_war = yes
			}
		}
	}
}

#Austria#Bohemia pays
country_event = {
	id = CE_hungary_expanded.3
	title = CE_hungary_expanded.3.t
	desc = CE_hungary_expanded.3.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	option = {
		name = CE_hungary_expanded.3.a
		add_treasury = 250
		tooltip = {
			BOH = {
				add_treasury = -250
			}
		}
	}
}

#Hungary #Another Crusade?
country_event = {
	id = CE_hungary_expanded.4
	title = CE_hungary_expanded.4.t
	desc = CE_hungary_expanded.4.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	option = {
		name = CE_hungary_expanded.4.a
		join_all_offensive_wars_of = HAB
		country_event = {
			id = CE_hungary_expanded.5
			days = 60
		}
		custom_tooltip = CE_and_hungary_will_answer
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_at_war = yes
			}
		}
	}
	option = {
		name = CE_hungary_expanded.4.b
		add_legitimacy = -20
		add_prestige = -25
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_at_war = no
			}
		}
	}
}

#Hungary #Papal Subsidies
country_event = {
	id = CE_hungary_expanded.5
	title = CE_hungary_expanded.5.t
	desc = CE_hungary_expanded.5.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	option = {
		name = CE_hungary_expanded.5.a
		add_ruler_modifier = {
			name = "CE_hungarian_papal_subsidies" #+24 yearly income
			duration = 3650
		}
	}
}

#Hungary #King  of Bohemia
country_event = {
	id = CE_hungary_expanded.6
	title = CE_hungary_expanded.6.t
	desc = CE_hungary_expanded.6.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = CE_hungary_expanded.6.a
		hidden_effect = {
			every_province = {
				limit = {
					area = silesia_area
					owner = {
						or = {
							tag = BOH
							overlord = {
								tag = BOH
							}
						}
					}
				}
			cede_province = SIL
			add_core = SIL
			}
			every_province = {
				limit = {
					area = lusatia_area
					owner = {
						or = {
							tag = BOH
							overlord = {
								tag = BOH
							}
						}
					}
				}
				cede_province = SOR
			}
			every_province = {
				limit = {
					area = moravia_area
					owner = {
						or = {
							tag = BOH
							overlord = {
								tag = BOH
							}
						}
					}
				}
				cede_province = MVA
			}
		}
		white_peace = BOH
		vassalize = SIL
		vassalize = SOR
		vassalize = MVA
		add_ruler_modifier = {
			name = "CE_elected_king_of_bohemia" #+0.5 Legitimacy
			duration = -1
		}
		HUN = {
			add_casus_belli = {
				target = BOH
				type = cb_restore_personal_union
				months = 9125
			}
		}
		HAB = {
			country_event = {
				id = CE_hungary_expanded.7
				days = 30
			}
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = CE_hungary_expanded.6.b
		add_prestige = 10
		ai_chance = {
			factor = 0
		}
	}
}

#Austria #King of Bohemia
country_event = {
	id = CE_hungary_expanded.7
	title = CE_hungary_expanded.7.t
	desc = CE_hungary_expanded.7.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	option = {
		name = CE_hungary_expanded.7.a
		white_peace = BOH
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = CE_hungary_expanded.7.b
		add_prestige = 5
		ai_chance = {
			factor = 0
		}
	}
}

#Hungary #Austrian Gold
country_event = {
	id = CE_hungary_expanded.8
	title = CE_hungary_expanded.8.t
	desc = CE_hungary_expanded.8.d
	picture = CITY_VIEW_eventPicture

	trigger = {
		tag = HUN
		HAB = {
			has_country_flag = CE_promised_hungary_bag_of_gold
		}
		is_at_war = no
	}

	mean_time_to_happen = {
		days = 30
	}

	option = {
		name = CE_hungary_expanded.8.a
		country_event = {
			id = CE_hungary_expanded.9
			days = 30
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = CE_hungary_expanded.8.b
		add_papal_influence = 10
		ai_chance = {
			factor = 1
		}
	}
}

#Austria #Hungarian Payday
country_event = {
	id = CE_hungary_expanded.9
	title = CE_hungary_expanded.9.t
	desc = CE_hungary_expanded.9.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	option = {
		name = CE_hungary_expanded.9.a
		add_treasury = -500
		tooltip = {
			HUN = {
				add_treasury = 500
			}
		}
		hidden_effect = {
			HUN = {
				country_event = {
					id = CE_hungary_expanded.10
					days = 30
				}
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_at_war = yes
			}
		}
	}

	option = {
		name = CE_hungary_expanded.9.b
		HUN = {
			country_event = {
				id = CE_hungary_expanded.11
				days = 30
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

#Austria #Hungarian Payday
country_event = {
	id = CE_hungary_expanded.10
	title = CE_hungary_expanded.10.t
	desc = CE_hungary_expanded.10.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	option = {
		name = CE_hungary_expanded.10.a
		add_treasury = 500
	}
}

#Hungary #Austrian Betrayal
country_event = {
	id = CE_hungary_expanded.11
	title = CE_hungary_expanded.11.t
	desc = CE_hungary_expanded.11.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes

	option = {
		name = CE_hungary_expanded.11.a
		add_casus_belli = {
			target = HAB
			type = cb_loan_cancelled
			months = 120
		}
	}
	option = {
		name = CE_hungary_expanded.11.b
		add_prestige = -10
	}
}

#Diet of 1468, extra taxes
country_event = {
	id = CE_hungary_expanded.12
	title = CE_hungary_expanded.12.t
	desc = CE_hungary_expanded.12.d
	picture = ELECTION_REPUBLICAN_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = HUN
		offensive_war_with = BOH
		NOT = { is_year = 1490}
		dynasty = Hunyadi
	}
	
	mean_time_to_happen = {
		days = 30
	}

	option = {
		name = CE_hungary_expanded.12.a
		add_country_modifier = {
			name = "CE_royal_prerogative_tax"
			duration = 3650
		}
	}
}

#Taxes Without Diet
country_event = {
	id = CE_hungary_expanded.13
	title = CE_hungary_expanded.13.t
	desc = CE_hungary_expanded.13.d
	picture = ELECTION_REPUBLICAN_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = HUN
		offensive_war_with = BOH
		NOT = { is_year = 1490}
		dynasty = Hunyadi
		has_country_modifier = CE_royal_prerogative_tax
	}
	
	mean_time_to_happen = {
		days = 730
	}

	option = {
		name = CE_hungary_expanded.13.a
		add_country_modifier = {
			name = "CE_taxes_without_diet"
			duration = 3650
		}
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = -5
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -5
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = -5
		}
	}
	option = {
		name = CE_hungary_expanded.13.b
		add_legitimacy = 5
	}
}

#Diet of 1470
country_event = {
	id = CE_hungary_expanded.14
	title = CE_hungary_expanded.14.t
	desc = CE_hungary_expanded.14.d
	picture = ELECTION_REPUBLICAN_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = HUN
		has_country_modifier = CE_royal_prerogative_tax
		has_country_modifier = CE_taxes_without_diet
	}
	
	mean_time_to_happen = {
		days = 365
	}

	option = {
		name = CE_hungary_expanded.14.a
		trigger = {
			OR = {
				dynasty = "Hunyadi"
				mil = 6
			}
		}
		highlight = yes
		add_stability = 1
		POL = {
			add_casus_belli = {
				target = HUN
				type = cb_restore_personal_union
				months = 9125
			}
		}
	}
	option = {
		name = CE_hungary_expanded.14.b
		trigger = {
			NOT = {
				OR = {
					dynasty = "Hunyadi"
					mil = 6
				}
			}
		}
		highlight = yes
		random_owned_province = {
			limit = {
				culture = hungarian
			}
			spawn_rebels = {
				size = 2
				type = noble_rebels  
			}
		}
		random_owned_province = {
			limit = {
				culture = hungarian
			}
			spawn_rebels = {
				size = 3
				type = noble_rebels 
			}
		}
	}
}

#Bohemia #King  of Bohemia
country_event = {
	id = CE_hungary_expanded.15
	title = CE_hungary_expanded.15.t
	desc = CE_hungary_expanded.15.d
	picture = CITY_VIEW_eventPicture

	trigger = {
		tag = BOH
		BOH = {
			has_country_flag = first_hussite_king
		}
		HUN = {
			is_in_war = {
				attacker_leader = HAB
				defender_leader = BOH
				duration = 1
			}
		}
		NOT = {
			is_year = 1500
		}
		silesia_area = {
			limit = {
				owner = {
					OR = {
						tag = BOH
						overlord = {
							tag = BOH
						}
					}
				}
			}
			controller = {
				OR = {
					tag = HUN
					tag = HAB
					any_ally = {
						OR = {
							tag = HUN
							tag = HAB
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = CE_hungary_expanded.15.a
		add_stability = -2
		random_owned_province = {
			spawn_rebels = {
				type = catholic_rebels 
				size = 2
				friend = HUN
			}
		}
		random_owned_province = {
			spawn_rebels = {
				type = catholic_rebels 
				size = 3
				friend = HUN
			}
		}
		ai_chance = {
			factor = 0
		}
	}
	option = {
		name = CE_hungary_expanded.15.b
		custom_tooltip = CE_HUN_revolt_of_the_estates
		HUN = {
			country_event = {
				id = CE_hungary_expanded.6
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}